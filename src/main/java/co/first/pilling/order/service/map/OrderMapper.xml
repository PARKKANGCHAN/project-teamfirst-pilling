<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="co.first.pilling.order.service.map.OrderMapper">
	<select id="orderSelectList">
		SELECT * FROM `order`
	</select>
	<select id="orderSelect">
		SELECT * FROM `order` WHERE ORDER_ID = #{orderId}
	</select>
	<select id="createOrderNo">
		SELECT COALESCE(MAX(order_id), 0) + 1 AS orderId FROM
		`order` ORDER BY order_id DESC LIMIT 1;
	</select>
	<insert id="orderInsert">
		INSERT INTO `order` (order_id, user_no, product_id,
		orderstatus_id, order_totalprice,
		order_refund, order_card)
		VALUES
		(#{orderId},
		#{userNo},#{productId},#{orderstatusId},#{orderTotalprice},#{orderRefund},#{orderCard})
	</insert>
	<delete id="orderDelete">
		DELETE FROM `order` WHERE ORDER_ID = #{orderId}
		AND
		ORDERSTATUS_ID ="2"
	</delete>
	<update id="orderUpdate">
		UPDATE `order`
		SET ORDERSTATUS_ID="1"
		WHERE ORDER_ID =
		#{orderId}
	</update>
</mapper>